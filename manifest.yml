modules:
  # User-facing issue panel (simplified, no admin functionality)
  jira:issuePanel:
    - key: synapse-issue-panel
      resource: user-app
      resolver:
        function: main-resolver
      title: Synapse AI Meeting Analysis
      icon: https://developer.atlassian.com/platform/forge/images/icons/issue-panel-icon.svg

  # Admin configuration page (separate module)
  jira:adminPage:
    - key: synapse-admin-page
      resource: admin-app
      resolver:
        function: admin-resolver
      title: Synapse Administration
      useAsConfig: true

  function:
    - key: main-resolver
      handler: index.handler
    - key: admin-resolver
      handler: admin.handler

app:
  id: ari:cloud:ecosystem::app/58c14000-d424-454a-b817-054e05164ca9
  runtime:
    name: nodejs20.x  # âœ… Updated from deprecated nodejs18.x

permissions:
  scopes:
    - read:jira-work      # Kept for issue panel
    - storage:app         # Kept for data storage
    # Removed write:jira-work - too broad for issue panel context
    # Admin permissions will be handled through Jira's admin page context

resources:
  # Separate resources for different user types
  - key: user-app
    path: static/main-app/build
  - key: admin-app
    path: static/admin-app/build
